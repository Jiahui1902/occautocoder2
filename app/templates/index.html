<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CrossWalk Searcher</title>
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/index.css') }}">
</head>
<body>
  <header>
    <h1>AutoCoder</h1>
    <nav>
      <ul>        
        <li class="{{ 'active' if request.endpoint == 'index_page' else '' }}"><a href="{{ url_for('index_page') }}">Autocoder</a></li>
        <li class="{{ 'active' if request.endpoint == 'crosswalk_page' else '' }}"><a href="{{ url_for('crosswalk_page') }}">Crosswalk</a></li>
        <li class="{{ 'active' if request.endpoint == 'batched_autocoding_page' else '' }}"><a href="{{ url_for('batched_autocoding_page') }}">Batched Autocoding</a></li>
        <li class="{{ 'active' if request.endpoint == 'information_page' else '' }}"><a href="{{ url_for('information_page') }}">Information</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <p>Search for occupations using the Crosswalk Searcher. The AutoCoder helps you find occupations that match your skills and interests. This autocoder will return as a 2018 Census code.</p>



    <form id="autocoderForm" action="{{ url_for('t5occ') }}" method="post">
      <label for="job-title">Job Title:</label>
      <input type="text" id="job-title" name="job_title">
      
      <label for="job-title">Job Duty:</label>
      <input type="text" id="job-title" name="job_duty">

      <label for="industry">Industry:</label>
      <input type="text" id="industry" name="industry">

      <label for="autocoder-type">Autocoder Type:</label>
      <select id="autocoder-type" name="autocoder_type">
        <option value="">Select</option>
        <option value="llm">LLM Autocoder</option>
        <option value="t5">T5 Autocoder</option>
      </select>

      <button type="submit">Search</button>
    </form>
  </main>

  <script>
    // read form input
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.querySelector('autocoderForm');
        if (form) {
        form.addEventListener('submit', function(event) {
            event.preventDefault(); 
            
            fetch("{{ url_for('t5occ') }}", {
                method: 'POST',
                body: new FormData(form),
                headers: {
                    'Accept': 'application/json',
                }
            })
            .then(response => response.json())
            .then(data => {                
                console.log(data);  
            })
            .catch(error => console.error('Error:', error));
        });
        }else {
            console.error("Form not found")
        }
    });
  </script>





<p style="text-align: center;">If the server stops responding, please use this <a href="https://huggingface.co/spaces/Jiahuixu/t5-occ">link</a>. </p>

  <footer>
    <p>&copy; Autocoder CrossWalking</p>
  </footer>
</body>
</html>